# í›‘ì–´ ë³´ê¸°

- ì»´í¬ë„ŒíŠ¸ ì¤‘ ì¼ë¶€ëŠ” React ì™¸ë¶€ ì‹œìŠ¤í…œì„ ì œì–´í•˜ê³  ë™ê¸°í™”í•´ì•¼ í•  ìˆ˜ ìˆë‹¤.
	- ë¸Œë¼ìš°ì € API ë¥¼ ì‚¬ìš©í•´ input focus í•˜ê¸°
	- React ì—†ì´ êµ¬í˜„ëœ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ì¬ìƒ ë° ì¼ì‹œì •ì§€ í•˜ê¸° ë“±
	- React ì™¸ë¶€ë¡œ ë‚˜ê°€ì„œ ì™¸ë¶€ ì‹œìŠ¤í…œì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” íƒˆì¶œêµ¬ê°€ í•„ìš”í•˜ë‹¤

## 1. ref ë¡œ ê°’ì„ ì°¸ì¡°í•˜ê¸°

- ì»´í¬ë„ŒíŠ¸ê°€ íŠ¹ì • ì •ë³´ë¥¼ ê¸°ì–µí•˜ë„ë¡ í•˜ê³  ì‹¶ì§€ë§Œ, í•´ë‹¹ ì •ë³´ê°€ ìƒˆ ë Œë”ë§ì„ ì´‰ë°œí•˜ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” useRef ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- state ì™€ ë§ˆì°¬ê°€ì§€ë¡œ refëŠ” ë¦¬ë Œë”ë§ ì‚¬ì´ì— React ì— ì˜í•´ ê°’ì´ ìœ ì§€ëœë‹¤.
- ë‹¤ë§Œ, state ëŠ” ê°’ì´ ë³€ê²½ë˜ë©´ ë Œë”ë§ì„ ì´‰ë°œí•˜ì§€ë§Œ, ref ëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤.
	- ì´ ref ì— timeoutID ë‚˜ DOM Element ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤.


---

## 2. ref ë¡œ DOM ì¡°ì‘í•˜ê¸°

- React ëŠ” ë Œë”ë§ ì¶œë ¥ê³¼ ì¼ì¹˜í•˜ë„ë¡ DOM ì„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ì— ìì£¼ ì¡°ì‘í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
- í•˜ì§€ë§Œ ë…¸ë“œì— ì´ˆì ì„ ë§ì¶”ê±°ë‚˜ ìŠ¤í¬ë¡¤í•˜ê±°ë‚˜ í¬ê¸°, ìœ„ì¹˜ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ React ê°€ ê´€ë¦¬í•˜ëŠ” DOM ìš”ì†Œì— ì ‘ê·¼í•´ì•¼ í•  ìˆ˜ ìˆë‹¤. ì´ëŸ° ê²½ìš°, DOM ë…¸ë“œì— ëŒ€í•œ ì°¸ì¡°(ref) ê°€ í•„ìš”í•˜ë‹¤.

```jsx
import { useRef } from 'react';

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleClick}>
        Focus the input
      </button>
    </>
  );
}
```

---

## 3. Effect ì™€ ë™ê¸°í™”í•˜ê¸°

- ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•´ì•¼ í•œë‹¤.
	- React state ì— ë”°ë¼ì„œ ë¹„ React ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ê±°ë‚˜
	- ì„œë²„ ì—°ê²°ì„ ì„¤ì •í•˜ê±°ë‚˜
	- ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— í‘œì‹œë  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚´ëŠ” ê²ƒ ë“±
- useEffect ë¥¼ ì‚¬ìš©í•˜ë©´ ë Œë”ë§ í›„ ì¼ë¶€ ì½”ë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê³ , ì´ë¥¼ ì‚¬ìš©í•´ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ React ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ìˆ˜ ìˆë‹¤.

```jsx
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying]);

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
      />
    </>
  );
}
```

- ìœ„ì˜ ì½”ë“œì—ì„œ, ref ë¥¼ ì‚¬ìš©í•´ <video> ì»´í¬ë„ŒíŠ¸ë¥¼ ë©”ëª¨ë¦¬ì— ë‹´ê³ 
- isPlaying ì´ë¼ëŠ” props ë³€í™”ì— ë§ì¶”ì–´ video ì˜ ì‹¤í–‰ì„ ì œì–´í•œë‹¤

- useEffect ì—ëŠ” cleanUp í•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤.
- ì´ëŠ”, ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ëì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ë¡œ ì´ì „ì— ì‹¤í–‰, ì—°ê²°, ìºì‹±í•´ë†¨ë˜ ë°ì´í„°ë¥¼ ëŠì„ ë•Œ ì¢…ì¢… ì‚¬ìš©í•œë‹¤.

---

## 4. Effect ê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

- Effect ëŠ” React íŒ¨ëŸ¬ë‹¤ì„ì—ì„œ ë²—ì–´ë‚  ìˆ˜ ìˆëŠ” íƒˆì¶œêµ¬ë‹¤. React ì™¸ë¶€ë¡œ ë‚˜ê°€ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ì½”ë“œì¸ ê²ƒ.
- ë§Œì•½, ì™¸ë¶€ ì‹œìŠ¤í…œì´ ê´€ì—¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” Effecdt ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.

1. ë Œë”ë§ì„ ìœ„í•´ ë°ì´í„°ë¥¼ ë³€í™˜í•  ë•Œ
2. ì‚¬ìš©ì ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ë•Œ

- ìœ„ì˜ ë‘ ì¼€ì´ìŠ¤ì—ëŠ” effect ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.

```jsx
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');

  // ğŸ”´ Avoid: redundant state and unnecessary Effect
  const [fullName, setFullName] = useState('');
  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  // ...
}
```

- ìœ„ì˜ ì½”ë“œì—ì„œ firstName, lastName ì˜ ê°’ì„ ì°¸ì¡°í•´ FullName ì„ ë§Œë“ ë‹¤.
- ì´ë ‡ê²Œ state ë¥¼ ì¡°ì •í•  ë•Œ Effect ëŠ” í•„ìš”í•˜ì§€ ì•Šë‹¤.
	- ì°¨ë¼ë¦¬, ë Œë”ë§í•˜ëŠ” ë™ì•ˆì— ê³„ì‚°ì´ ë˜ë„ë¡ ì½”ë“œë¥¼ ì§œëŠ” ê²ƒì´ ì¢‹ë‹¤

```jsx
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  // âœ… Good: calculated during rendering
  const fullName = firstName + ' ' + lastName;
  // ...
}
```

---

## 5. reactive Effect ì˜ ìƒëª…ì£¼ê¸°

- Effect ëŠ” ì»´í¬ë„ŒíŠ¸ì™€ ë‹¤ë¥¸ ìƒëª…ì£¼ê¸°ë¥¼ ê°–ëŠ”ë‹¤.
- ì»´í¬ë„ŒíŠ¸ëŠ” Mount, UnMount, Update ì˜ ë¼ì´í”„ ì‚¬ì´í´ì„ ê°–ê³  ìˆì§€ë§Œ, Effect ëŠ” ë™ê¸°í™”ë¥¼ ì‹œì‘í•˜ê±°ë‚˜ ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•˜ëŠ” ë‘ ê°€ì§€ ì‘ì—…ë§Œ í•œë‹¤.

```jsx
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}

// chat.js
export function createConnection(serverUrl, roomId) {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('âœ… Connecting to "' + roomId + '" room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('âŒ Disconnected from "' + roomId + '" room at ' + serverUrl);
    }
  };
}
```

- ìœ„ì˜ ì½”ë“œì—ì„œ Effect ëŠ” roomId prop ì˜ ê°’ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤.
	- Prop ì€ ë°˜ì‘í˜• ê°’ì´ê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ë Œë”ë§í•  ë•Œ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.
	- ì¦‰, roomId ê°€ ë³€ê²½ë˜ë©´ Effect ê°€ ì¬ ë™ê¸°í™”(ë° ì„œë²„ ì¬ì—°ê²°)ëœë‹¤.
- React ëŠ” Effect ì˜ ì˜ì¡´ì„±ì„ ì˜¬ë°”ë¥´ê²Œ ì§€ì •í–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¦°í„° ê·œì¹™ì„ ì œê³µí•œë‹¤.

---

## 6. ì´ë²¤íŠ¸ì™€ Effect ë¶„ë¦¬í•˜ê¸°

- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì´ë²¤íŠ¸ê°€ë¥¼ ë‹¤ì‹œ ìˆ˜í–‰í–ˆì„ ë•Œë§Œ ì‹¤í–‰ëœë‹¤. ë°˜ë©´, Effect ëŠ” prop ì´ë‚˜ state ë³€ìˆ˜ì²˜ëŸ¼ ì½ì€ ê°’ì´ ë§ˆì§€ë§‰ ë Œë”ë§ì—ì„œì™€ ë‹¤ë¥¼ ë•Œ ë™ê¸°í™”í•œë‹¤.
- ì´ ë‘ ê°€ì§€ ë™ì‘ì„ í˜¼í•©í•´ ì¼ë¶€ ê°’ì—ëŠ” ë°˜ì‘í•˜ì§€ë§Œ ë‹¤ë¥¸ ê°’ì—ëŠ” ë°˜ì‘í•˜ì§€ ì•ŠëŠ” Effect ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- Effect ë‚´ì˜ ëª¨ë“  ì½”ë“œëŠ” ë°˜ì‘í˜•ì´ë‹¤.
	- ì½ì€ ë°˜ì‘í˜• ê°’ì´ ë¦¬ë Œë”ë§ìœ¼ë¡œ ì¸í•´ ë³€ê²½ë˜ë©´ ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤.

```jsx
import { useState, useEffect } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, theme]);

  return <h1>Welcome to the {roomId} room!</h1>
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        Use dark theme
      </label>
      <hr />
      <ChatRoom
        roomId={roomId}
        theme={isDark ? 'dark' : 'light'} 
      />
    </>
  );
}

// notification.js
import Toastify from 'toastify-js';
import 'toastify-js/src/toastify.css';

export function showNotification(message, theme) {
  Toastify({
    text: message,
    duration: 2000,
    gravity: 'top',
    position: 'right',
    style: {
      background: theme === 'dark' ? 'black' : 'white',
      color: theme === 'dark' ? 'white' : 'black',
    },
  }).showToast();
}
```

- ì´ ì½”ë“œì˜ ë™ì‘ ê²°ê³¼ë¥¼ ë³´ë©´, theme ì˜ ê°’ì´ ë³€í•¨ì— ë”°ë¼ ì„œë²„ì™€ ë‹¤ì‹œ ì—°ê²°ëœë‹¤.
- ê·¸ë ‡ë‹¤ë©´, theme ì„ ì½ëŠ” ì½”ë“œë¥¼ Effect ì—ì„œ Effect Event ë¡œ ì˜®ê¸°ë©´ ëœë‹¤.

```jsx
import { useState, useEffect } from 'react';
import { experimental_useEffectEvent as useEffectEvent } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      onConnected();
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to the {roomId} room!</h1>
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        Use dark theme
      </label>
      <hr />
      <ChatRoom
        roomId={roomId}
        theme={isDark ? 'dark' : 'light'} 
      />
    </>
  );
}
```

- useEffectEvent í•¨ìˆ˜ ë‚´ë¶€ì˜ ì½”ë“œëŠ” ë°˜ì‘í˜• ì½”ë“œê°€ ì•„ë‹ˆë‹¤.
- theme ì„ ë³€ê²½í•´ë„ ë”ì´ìƒ Effect ê°€ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤.

---

## 7. Effect ì˜ì¡´ì„± ì œê±°í•˜ê¸°

- Effect ë¥¼ ì‘ì„±í•  ë•Œ, Effect ì˜ ì˜ì¡´ì„± ëª©ë¡ì—ì„œ Effect ê°€ ì½ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì„ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸í•œë‹¤.
- í•˜ì§€ë§Œ, ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ Effect ê°€ ë„ˆë¬´ ìì£¼ ì‹¤í–‰í•˜ê±°ë‚˜ ë¬´í•œ ë£¨í”„ì— ë¹ ì§ˆ ìˆ˜ ìˆë‹¤.

```jsx
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const options = {
    serverUrl: serverUrl,
    roomId: roomId
  };

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [options]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={e => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

- ìœ„ ì½”ë“œì—ì„œ Effect ëŠ” ì‚¬ìš©ìê°€ input ì„ í¸ì§‘í•  ë•Œë§ˆë‹¤ ë‹¤ì‹œ ìƒì„±ë˜ëŠ” options ê°ì²´ì— ì˜ì¡´í•œë‹¤.
- í•´ë‹¹ ì±„íŒ…ì— ë©”ì‹œì§€ë¥¼ ì…ë ¥í•  ë•Œë§ˆë‹¤ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ë˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„  options ê°ì²´ë¥¼ ìƒì„±í•´, Effect ê°€ roomId ë¬¸ìì—´ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

```jsx
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={e => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

- ì—¬ê¸°ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” êµí›ˆì€ ë§Œì•½ ì˜ì¡´ì„± ë°°ì—´ì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤ë©´, ë³¸ì¸ì´ ì‘ì„±í•œ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.